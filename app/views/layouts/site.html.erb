<!DOCTYPE html>
<html>
  <head>
    <title>Time to Answer</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application' %>
    <%= stylesheet_link_tag    'site' %>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>

  </head>

  <body>
    <div class='container-fluid pe-0 ps-0'>
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary px-5 py-4 justify-content-between align-items-center">
        <div>
          <%= link_to "Time to Answer",  root_path, class:"navbar-brand" %>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse flex-grow-0" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <% unless user_signed_in? %>
              <li class="nav-item">
                <%= link_to t('navbar.login'), new_user_session_path, class:"nav-link" %>
              </li>
              <li class="nav-item">
                <%= link_to t('navbar.signup'),  new_user_registration_path, class:"nav-link" %>
              </li>
            <% else %>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-expanded="false">
                  <%= current_user.email %>
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <%= link_to users_backoffice_welcome_index_path do %>
                          <i class="fa fa-user fa-fw"></i> <%= t('navbar.profile') %>
                    <% end %>
                  </li>
                  <li role="separator" class="divider"></li>
                  <li>
                    <%= link_to destroy_user_session_path, method: :delete do %>
                        <i class="fa fa-sign-out fa-fw"></i> <%= t('navbar.logout') %>
                    <% end %>
                  </li>
                </ul>
              </li>
            <% end %>
          </ul>
        </div>
      </nav>

      <div class='container-md py-5'>
        <div class="jumbotron py-4 px-5 mb-5 mt-3 bg-light border border-opacity-25 rounded-1">
          <h1 class="display-5">Hello, welcome to Time to Answer!</h1>
          <p class="lead">This is a simple webapp about Q&A that includes a lot of interesting subjects and areas </p>
          <hr class="my-4">
          <% unless user_signed_in? %>
            <p>Create your account or sign in to start interacting, maybe seeking for answers...</p>
            <%= link_to "Create account", new_user_registration_path, class:"btn btn-primary btn-lg", role:"button" %>  
            <%= link_to "Sign in", new_user_session_path, class:"btn btn-primary btn-lg", role:"button" %>
          <% end %>
        </div>
        <%= yield %>
      </div>
    </div>

    <%= javascript_include_tag 'application' %>
    <%= javascript_include_tag 'site' %>

    <% if notice %>
        <%= javascript_tag do %>
            $.bootstrapGrowl('<%= notice %>', {
            type: 'success', // (null, 'info', 'danger', 'success')
            align: 'right', // ('left', 'right', or 'center')
            allow_dismiss: true, // If true then will display a cross to close the popup.
            stackup_spacing: 10 // spacing between consecutively stacked growls.
            });
        <% end %>
    <% end %>
  </body>
</html>
